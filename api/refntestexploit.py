from flask import Flask, jsonify, request
from flask_cors import CORS
import os

app = Flask(__name__)
CORS(app)

@app.route('/api/refntestexploit', methods=['GET'])
def refntestexploit():
    try:
        # 使用相对路径读取日志文件
        log_path = os.path.join(os.path.dirname(__file__), '../public/refntestexploit.log')
        with open(log_path, 'r') as f:
            content = f.read()
        return content
    except Exception as e:
        return f"Error reading log file: {str(e)}", 500

# 健康检查端点
@app.route('/api/health', methods=['GET'])
def health():
    return jsonify({"status": "healthy"})

# Vercel 需要这个
if __name__ == '__main__':
    app.run()
